$.getScript("https://cdn.onesignal.com/sdks/OneSignalSDK.js",function(){var a=window.OneSignal||[];a.push(["init",{appId:"4e70f0fe-5a26-43f3-889f-8a98e487f58c",autoRegister:true,subdomainName:"rocketwatch",httpPermissionRequest:{enable:true},notifyButton:{size:"medium",position:"bottom-left",enable:true,displayPredicate:function(){return a.isPushNotificationsEnabled().then(function(b){return !b})},}}])});$.getScript("https://widget.intercom.io/widget/h2k1lqjl",function(){window.intercomSettings={app_id:"h2k1lqjl"};var b=window;var a=b.Intercom;if(typeof a==="function"){a("reattach_activator");a("update",intercomSettings)}else{var e=document;var c=function(){c.c(arguments)};c.q=[];c.c=function(d){c.q.push(d)};b.Intercom=c;if(b.attachEvent){b.attachEvent("onload",l)}else{b.addEventListener("load",l,false)}}});var QueryString=function(){var d={};var c=window.location.search.substring(1);var e=c.split("&");for(var b=0;b<e.length;b++){var f=e[b].split("=");if(typeof d[f[0]]==="undefined"){d[f[0]]=decodeURIComponent(f[1])}else{if(typeof d[f[0]]==="string"){var a=[d[f[0]],decodeURIComponent(f[1])];d[f[0]]=a}else{d[f[0]].push(decodeURIComponent(f[1]))}}}return d}();function settings(){var a=document.getElementById("settings");i;a.innerHTML+='<li><a href="#!">Notifications </a></li>'}function init(){if(QueryString.id){watch(QueryString.id)}else{if(QueryString.agency){agency(QueryString.agency)}else{if(QueryString.search){search(QueryString.search)}else{if(QueryString.agencies){var a=document.getElementsByTagName("main")[0];a.className="container row";$.getJSON("//launchlibrary.net/1.2/agency?limit=200&type=3&mode=verbose",function(b){a.innerHTML='<h3 class="white-text">Agencies:</h3>';for(var c in b.agencies){a.innerHTML+='<div class="col s12 m6"><div class="card"><div class="card-content"><h5 class="header black-text truncate">'+b.agencies[c].name+'</h5></div><div class="card-action"></div></div>';if(b.agencies[c].infoURL){document.getElementsByClassName("card-action")[c].innerHTML+='<a class="waves-effect waves-light btn deep-orange hoverable" href="'+b.agencies[c].infoURL+'">Website</a>'}if(b.agencies[c].wikiURL){document.getElementsByClassName("card-action")[c].innerHTML+='<a class="waves-effect waves-light btn deep-orange hoverable" href="'+b.agencies[c].wikiURL+'">Wikipedia</a>'}document.getElementsByClassName("card-action")[c].innerHTML+='<a class="waves-effect waves-light btn deep-orange hoverable" href="/?agency='+b.agencies[c].abbrev+'">Watch Launches</a>'}}).fail(function(b){a.innerHTML+='<div class="container"><h1 class="white-text" onclick="location.reload()">'+JSON.parse(b.responseText).msg+"</h1></div>"})}else{$.getJSON("//launchlibrary.net/1.2/launch?limit=3&status=1&mode=verbose&startdate="+ISODateString(new Date()).split("T")[0],function(e){var b=document.getElementsByTagName("main")[0];b.className="container row";b.innerHTML='<h1 class="white-text">Upcoming Launches:</h1>';for(var c in e.launches){if(e.launches[c].status==1){new Countdown(Date.parse(e.launches[c].net),"countdown_"+c);b.innerHTML+='<div class="col s12 l'+Math.floor(12/e.count)+'"><div class="card"><div class="card-content"><h4 class="header black-text truncate">'+e.launches[c].name.replace(" | ","</br>")+'</h4><a class="truncate" href="?agency='+(e.launches[c].rocket.agencies[0]&&e.launches[c].rocket.agencies[0].abbrev)+'">'+(e.launches[c].rocket.agencies[0]&&e.launches[c].rocket.agencies[0].name)+'</a><a class="truncate">'+e.launches[c].location.name+'</a><a class="truncate">'+ReadableDateString(e.launches[c].net)+'</a><h5 id="countdown_'+c+'"></h5></div><div class="card-action"><a class="waves-effect waves-light btn deep-orange hoverable" href="/?id='+e.launches[c].id+'">Watch</button></div></div></div>'}}$.getJSON("//launchlibrary.net/1.2/launch?limit=4&sort=desc&status=3&enddate="+ISODateString(new Date(+new Date()+86400000)).split("T")[0],function(f){b.innerHTML+='<h1 class="white-text">Recent Launches:</h1>';for(var d in f.launches){b.innerHTML+='<div class="col s12 m6 l3"><div class="card"><div class="card-content"><h5 class="header black-text truncate">'+f.launches[d].name.replace(" | ","</br>")+"</h5><a>"+ReadableDateString(f.launches[d].net)+'</a></div><div class="card-action"><a class="waves-effect waves-light btn deep-orange hoverable" href="/?id='+f.launches[d].id+'">More</a></div></div>'}})}).fail(function(c){var b=document.getElementsByTagName("main")[0];b.className="valign-wrapper";b.innerHTML='<div class="container"><h1 class="white-text">'+(JSON.parse(c.responseText).msg||"Error occured")+"</h1></div>"})}}}}}function agency(a){var b=document.getElementsByTagName("main")[0];b.className="container row";var c=document.createElement("div");b.appendChild(c);$.getJSON("//launchlibrary.net/1.2/agency/"+a,function(d){c.innerHTML+='<h1 class="white-text">'+d.agencies[0].name+"</h1>";if(d.agencies[0].infoURL){c.innerHTML+='<a class="waves-effect waves-light btn hoverable grey darken-3" href="'+d.agencies[0].infoURL+'" target="_blank">Website</a>'}if(d.agencies[0].wikiURL){c.innerHTML+='<a class="waves-effect waves-light btn hoverable grey darken-3" href="'+d.agencies[0].wikiURL+'" target="_blank">Wikipedia</a>'}});search("&agency="+a)}function search(d){var a=document.getElementsByTagName("main")[0];a.className="container row";var b=document.createElement("div");a.appendChild(b);var c=document.createElement("div");a.appendChild(c);console.log("Query: "+d);if(d!="undefined"){$.getJSON("//launchlibrary.net/1.2/launch?limit=200&mode=verbose&sort=desc&name="+d,function(g){for(var e in g.launches){if(Date.parse(g.launches[e].net)<new Date()){c.innerHTML+='<div class="col s12 m6"><div class="card"><div class="card-content"><h5 class="header black-text truncate">'+g.launches[e].name.replace(" | ","</br>")+"</h5><a>"+ReadableDateString(g.launches[e].net)+"</br>"+g.launches[e].location.name+'</a></div><div class="card-action"><a class="waves-effect waves-light btn deep-orange hoverable" href="/?id='+g.launches[e].id+'">More</a></div></div>'}else{var f=e;c.innerHTML='<h3 class="white-text">Next Launch:</h3>';c.innerHTML+='<div class="card"><div class="card-stacked"><div class="card-content"><h2 class="header black-text">'+g.launches[e].name.replace(" | ","</br>")+'</h2><h4 id="countdown">Not Earlier Than: '+ReadableDateString(g.launches[e].net).split(" ")[0]+"</h4><a>"+ReadableDateString(g.launches[e].net)+"</br>"+g.launches[e].location.name+'</a></div><div class="card-action"><a class="waves-effect waves-light btn deep-orange hoverable" href="/?id='+g.launches[e].id+'">Watch</a></div></div>';c.innerHTML+='<h3 class="white-text">Historical Launches:</h3>'}}if(g.launches[f].status==1){$countdown=new Countdown(Date.parse(g.launches[f].net),"countdown")}}).fail(function(e){a.innerHTML+='<div class="container"><h1 class="white-text">'+(JSON.parse(e.responseText).msg||"Failed to load")+"</h1></br></div>"})}else{c.innerHTML='<form action="http://rocketwatch.yasiu.pl/" method="get"><h1 class="white-text">What are you looking for?</h1></br><div class="row"><div class="card-panel col s6 offset-s3"><input type="text" style="font-size: 4rem; height: 6rem; text-align:center;" name="search"></div></div><input type="submit" class="waves-effect waves-light btn hoverable grey darken-3" value="Submit"></form>'}}function watch(a){$.getJSON("//launchlibrary.net/1.2/launch/"+a,function(b){$.getJSON("//host.yasiu.pl/rocketwatch/data/sources.json",function(k){var d=document.createElement("div");d.className="row";document.getElementsByTagName("main")[0].appendChild(d);document.title=b.launches[0].name;var c=b.launches[0].location.pads[0];var p="https://maps.googleapis.com/maps/api/staticmap?zoom=16&maptype=satellite&size=480x360&scale=2&key="+k.data.api.maps+"&center="+c.latitude+","+c.longitude;var g=b.launches[0].name.split("| ")[1].split(" (")[0].replace("SpX ","").replace("10 x Iridium NEXT","Iridium NEXT Mission 1");var r=b.launches[0].failreason||(b.launches[0].missions[0]&&b.launches[0].missions[0].description)||"";var t=b.launches[0].rocket.agencies[0].name||b.launches[0].pad[0].agencies[0]||"";var m=((b.launches[0].rocket.agencies[0]&&b.launches[0].rocket.agencies[0].abbrev)||(b.launches[0].pad[0].agencies[0]&&b.launches[0].pad[0].agencies[0].abbrev)||"unknown").toLowerCase();if(c.id==137&&b.launches[0].rocket.id==96){m="asa"}var z=(m=="spx"&&QueryString.r&&b.launches[0].status==3);var f=Date.parse(b.launches[0].net);var x=Math.floor((f-Date.parse(new Date()))/1000);var j=new Sources(d);d.innerHTML='<div id="info" class="col s12 m10 offset-m1 l8 offset-l2"><div class="card"><div class="card-content"><h1>'+b.launches[0].name.replace(" |","</br>")+'</h1><p><a href="?agency='+m+'" target="_blank">'+t+'</a>, <a target="_blank" href="'+(c.infoURL||c.wikiURL)+'">'+c.name+"</a>, "+ReadableDateString(b.launches[0].net)+'</a><h4 id="countdown"></h4><h5>'+r+'</h5></div><div id="card-action" class="card-action"></div></div></div><div class="col s12"><a style="cursor:pointer" onclick="$(\'#info\').slideToggle();">toggle info cards</a></div>';var u=document.createElement("script");u.type="application/ld+json";u.innerHTML+='{ "@context": "http://schema.org", "@type": "Event", "name": "'+b.launches[0].name+'", "image": "'+p+'", "description": "'+r+'", "performer": "'+t+'", "startDate": "'+b.launches[0].isostart+'", "endDate": "'+b.launches[0].isoend+'", "url": "'+location.href+'", "location": { "@type": "Place", "name": "'+b.launches[0].location.pads[0].name+'", "address": "'+c.latitude+","+c.longitude+'"} },';document.head.appendChild(u);var e=document.getElementById("card-action");if(m=="spx"){$.getJSON("https://www.flightclub.io:8443/FlightClub/api/v1/missions/",function(s){for(var o in s.data){if(s.data[o].date.replace(/-/gi,"")==b.launches[0].isostart.split("T")[0]){e.innerHTML+='<a class="waves-effect waves-light btn hoverable grey darken-3" href="//www.flightclub.io/world/?code='+s.data[o].code+'&w=2" target="_blank">FlightClub.io</a>';break}}})}if(b.launches[0].rocket.infoURL||b.launches[0].rocket.wikiURL){e.innerHTML+='<a class="waves-effect waves-light btn hoverable grey darken-3" href="'+(b.launches[0].rocket.infoURL||b.launches[0].rocket.wikiURL)+'" target="_blank">More about Rocket</a>';j.add((b.launches[0].rocket.infoURL||b.launches[0].rocket.wikiURL),b.launches[0].rocket.name+" Information","last")}e.innerHTML+='<a class="waves-effect waves-light btn hoverable grey darken-3" href="?search='+b.launches[0].rocket.name+'" target="_blank">More launches of this rocket</a>';e.innerHTML+='<a class="waves-effect waves-light btn hoverable grey darken-3" href="?agency='+m+'">More launches from '+t+"</a>";if(c.infoURL||c.wikiURL){j.add((c.infoURL||c.wikiURL),c.name+" Information","last")}for(var w in k.custom[g]){if(k.custom[g][w].type.match("button")){e.innerHTML+='<a class="waves-effect waves-light btn hoverable grey darken-3" href="'+k.custom[g][w].url+'">'+k.custom[g][w].name+"</a>"}}if(b.launches[0].status==1){var q=new Countdown(f,"countdown");setInterval(function(){document.title="["+q.value()+"] "+b.launches[0].name},1000);if((b.launches[0].location.id==16||b.launches[0].location.id==17)&&x<86400){for(var y in k.data.audio){if(k.data.audio[y].id==16){j.add(k.data.audio[y].url,k.data.audio[y].name,"audio")}}}}else{if(b.launches[0].status==2){document.getElementById("countdown").innerHTML="Not Earlier Than: "+ReadableDateString(b.launches[0].net).split(" ")[0]}if(b.launches[0].status==3){document.getElementById("countdown").innerHTML="Mission succesfull!"}if(b.launches[0].status==4){document.getElementById("countdown").innerHTML="Mission failed!"}if(z){e.innerHTML+='<a class="waves-effect waves-light btn hoverable grey darken-3" href="?id='+b.launches[0].id+'">Re-watch this launch</a>';for(var h in k.custom[g]){if(k.custom[g][h].type.match("recovery_")){j.add(k.custom[g][h].url,k.custom[g][h].name,k.custom[g][h].type.split("recovery_")[1])}}document.getElementById("countdown").innerHTML="First stage recovery operations";g+=" Recovery"}}if(k.company[m]){$.getJSON(k.company[m].reddit+"/search.json?sort=relevance&restrict_sr=on&q="+g,function(o){for(var s in o.data.children){if(b.launches[0].status==3&&o.data.children[s].data.created_utc*1000<Date.parse(b.launches[0].windowend)){if(o.data.children[s].data.is_self==false&&!o.data.children[s].data.domain.match("twitter.com")){j.add(o.data.children[s].data.url,"["+o.data.children[s].data.domain+"] "+o.data.children[s].data.title)}j.add(o.data.children[s].data.id,"[Reddit] "+o.data.children[s].data.title,"reddit")}else{if(b.launches[0].status!=3){if(o.data.children[s].data.is_self==false&&!o.data.children[s].data.domain.match("twitter.com")){j.add(o.data.children[s].data.url,"["+o.data.children[s].data.domain+"] "+o.data.children[s].data.title)}j.add(o.data.children[s].data.id,"[Reddit] "+o.data.children[s].data.title,"reddit")}}}}).fail(function(o){d.innerHTML+='<div class="col s12"><a style="cursor:pointer;color:red;" onclick="location.reload();">Failed to load Reddit threads '+("("+JSON.parse(o.responseText).msg+")"||"")+". Reload?</a></div>"});if(b.launches[0].status<=2||z){if(x>0){if(b.launches[0].location.countryCode=="USA"){$.getJSON("//forecast.weather.gov/MapClick.php?FcstType=json&unit=1&lat="+b.launches[0].location.pads[0].latitude+"&lon="+b.launches[0].location.pads[0].longitude,function(o){for(var s in o.time.startValidTime){if(o.time.startValidTime[s].split("T")[0].replace(/-/gi,"")==b.launches[0].isonet.split("T")[0]){document.getElementById("info").innerHTML+='<div id="forecast" class="card-panel row"><div class="col s6 offset-s3 m4 l2"><img style="max-width:90%" onclick=window.open("//radar.weather.gov/lite/N0R/'+o.location.radar.split("K")[1]+'_loop.gif") src="//radar.weather.gov/lite/N0R/'+o.location.radar.split("K")[1]+'_loop.gif"></div><div class="col s12 m8 l10"><div class = "card-content" > <h5>Weather forecast:</br>'+o.data.text[s]+"</h5><a>[Station: "+o.currentobservation.name+", Updated: "+ReadableDateString(o.creationDate)+']</a></br><a class="waves-effect waves-light btn hoverable grey darken-3" href="'+o.credit+'" target="_blank">More</a></div></div></div>';break}}})}if(b.launches[0].location.id==9){document.getElementById("info").innerHTML+='<div id="forecast" class="card horizontal"><div class="card-stacked"><div class = "card-content" >Weather forecast: <a href="//space.jaxa.jp/tnsc/tn-weather/data/daily.gif" target="_blank">Daily</a> / <a href="//space.jaxa.jp/tnsc/tn-weather/data/weekly.gif" target="_blank">Weekly</a></div></div></div>'}}if(k.company[m].irc){j.add(k.company[m].irc,"IRC channel","irc")}for(var n in k.company[m].twitter){j.add(k.company[m].twitter[n],"","twitter")}}}if(b.launches[0].vidURLs&&!z){for(var h in b.launches[0].vidURLs){id=b.launches[0].vidURLs[h].split("?v=")[1];if(id!=undefined){$.getJSON("https://www.googleapis.com/youtube/v3/videos?key="+k.data.api.youtube+"&fields=items(id,snippet(title,publishedAt))&part=snippet&id="+b.launches[0].vidURLs[h].split("?v=")[1],function(o){j.add("//www.youtube.com/embed/"+o.items[0].id+"?rel=0&autoplay=1","["+ReadableDateString(o.items[0].snippet.publishedAt)+"] "+o.items[0].snippet.title,"video")})}else{if(!b.launches[0].vidURLs[h].match("spacex.com/webcast")){j.add(b.launches[0].vidURLs[h],"Video #"+h,"video")}}}}else{if(k.company[m]&&b.launches[0].status==1){$.getJSON("https://www.googleapis.com/youtube/v3/search?key="+k.data.api.youtube+"&part=snippet&order=date&maxResults=2&type=video&eventType=upcoming&channelId="+k.company[m].youtube,function(s){for(var o in s.items){j.add("//www.youtube.com/embed/"+s.items[o].id.videoId+"?autoplay=1&rel=0","["+ReadableDateString(s.items[o].snippet.publishedAt)+"] "+s.items[o].snippet.title,"video")}})}}if(b.launches[0].status==1){for(var h in k.custom[g]){if(k.custom[g][h].type.match("live")){j.add(k.custom[g][h].url,k.custom[g][h].name,k.custom[g][h].type.split("live_")[1])}}}j.show(((b.launches[0].status<=2||z)&&(k.company[m]&&k.company[m].irc)&&b.launches[0].vidURLs.length>=2)?"":"narrow")})})}function ISODateString(b){function a(c){return c<10?"0"+c:c}return b.getUTCFullYear()+"-"+a(b.getUTCMonth()+1)+"-"+a(b.getUTCDate())+"T"+a(b.getUTCHours())+":"+a(b.getUTCMinutes())+":"+a(b.getUTCSeconds())+"Z"}function ReadableDateString(c){var a=new Date(c);var b=a.getFullYear()+"/"+("0"+(a.getMonth()+1)).slice(-2)+"/"+("0"+a.getDate()).slice(-2)+" "+("0"+a.getHours()).slice(-2)+":"+("0"+a.getMinutes()).slice(-2)+":"+("0"+a.getSeconds()).slice(-2);return b}function Sources(b,a){this.audio=[];this.video=[];this.live=[];this.twitter=[];this.last=[];this.add=function(d,c,e){if(e=="reddit"||d.match(".reddit.com")){this.live.push({name:c,embed:"http://reddit-stream.com/comments/"+(d.split("/comments/")[1]||d),url:"http://reddit.com/comments/"+(d.split("/comments/")[1]||d)})}else{if(d.match("youtube.com")||d.match("livestream.com")||d.match("dailymotion.com")||d.match(".mp4")||(c.match("Live")&&c.match("Stream")&&!d.match("reddit.com"))||e=="video"){this.video.push({name:c,url:d.replace("/watch?v=","/embed/").replace("www.dailymotion.com/video/","www.dailymotion.com/embed/video/")})}else{if(e=="audio"||d.match(".mp3")){this.audio.push({name:c,url:d})}else{if(e=="twitter"){this.twitter.push({name:c,url:d})}else{if(e=="last"||e=="irc"){this.last.push({name:c,embed:d,url:d});if(e=="irc"){this.irc=d}}else{this.live.push({name:c,embed:d,url:d})}}}}}};this.show=function(m){var f=this.video;var c=this.live.concat(this.last);if(document.getElementById(b)){$content=document.getElementById(b)}else{$content=b}selectVideo=function(n){g=parseInt(document.getElementById(n+"_select").value);window.open(f[g].url,n);document.getElementById(n+"_reload").href=f[g].url};selectSource=function(n){g=parseInt(document.getElementById(n+"_select").value);window.open(c[g].embed,n);document.getElementById(n+"_reload").href=c[g].embed;document.getElementById(n+"_share").href=c[g].url};if(this.audio.length!=0){var h=document.createElement("div");h.className="col s12 m10 offset-m1 l8 offset-l2";for(var j in this.audio){h.innerHTML+='<div class="col s12 m'+Math.floor(12/this.audio.length)+'"><div class="card"><audio style="width:100%" controls><source src="'+this.audio[j].url+'"></audio></br><div class="cardnav"><a class="truncate">'+this.audio[j].name+"</a></div></div></div>"}$content.appendChild(h)}if(f.length!=0){var k="";for(var g in f){k+="<option value='"+g+"'>"+f[g].name+"</option>"}if(f.length==1||m=="narrow"){m="narrow";$content.innerHTML+='<div class="col s12 m10 offset-m1 l8 offset-l2"><div class="card"><div class="video-container" id="videoframe1"><iframe name="videoframe1" src="'+f[0].url+'" frameborder="0" allowfullscreen></iframe></div><div class="cardnav"><a id="videoframe1_reload" href="'+f[0].url+'" target="videoframe1"><i class="material-icons">&#xE86A;</i></a><a onclick=$("#videoframe1").slideToggle();><i class="material-icons">close</i></a><select id="videoframe1_select" onchange="selectVideo(\'videoframe1\')">'+k+"</select></div></div></div></div>"}else{$content.innerHTML+='<div class="col s12 m10 offset-m1 l6"><div class="card"><div class="video-container" id="videoframe1"><iframe name="videoframe1" src="'+f[0].url+'" frameborder="0" allowfullscreen></iframe></div><div class="cardnav"><a id="videoframe1_reload" href="'+f[0].url+'" target="videoframe1"><i class="material-icons">&#xE86A;</i></a><a onclick=$("#videoframe1").slideToggle();><i class="material-icons">close</i></a><select id="videoframe1_select" onchange="selectVideo(\'videoframe1\')">'+k+"</select></div></div></div></div>";$content.innerHTML+='<div class="col s12 m10 offset-m1 l6"><div class="card"><div class="video-container" id="videoframe2"><iframe name="videoframe2" src="'+f[1].url+'" frameborder="0" allowfullscreen></iframe></div><div class="cardnav"><a id="videoframe2_reload" href="'+f[1].url+'" target="videoframe2"><i class="material-icons">&#xE86A;</i></a><a onclick=$("#videoframe2").slideToggle();><i class="material-icons">close</i></a><select id="videoframe2_select" onchange="selectVideo(\'videoframe2\')">'+k+"</select></div></div></div></div>"}}if(c.length!=0){var k="";for(var g in c){k+="<option value='"+g+"'>"+c[g].name.slice(0,100)+"</option>"}if(c.length==1||m=="narrow"){$content.innerHTML+='<div class="col s12 m10 offset-m1 l8 offset-l2"><div class="card"><div class="content-container" id="contentframe1"><iframe name="contentframe1" src="'+c[0].embed+'" frameborder="0" allowfullscreen></iframe></div><div class="cardnav"><a id="contentframe1_reload" href="'+c[0].embed+'" target="contentframe1"><i class="material-icons">&#xE86A;</i></a><a id="contentframe1_share" href="'+c[0].url+'" target="_blank"><i class="material-icons">open_in_new</i></a><a onclick=$("#contentframe1").slideToggle();><i class="material-icons">close</i></a><select id="contentframe1_select" onchange="selectSource(\'contentframe1\')">'+k+"</select></div></div></div></div>";if(this.irc){$content.innerHTML+='<div class="col s12 m10 offset-m1 l8 offset-l2"><div class="card"><div class="content-container" id="contentframe2"><iframe name="contentframe2" src="'+c[c.length-1].embed+'" frameborder="0" allowfullscreen></iframe></div><div class="cardnav"><a id="contentframe2_reload" href="'+c[c.length-1].embed+'" target="contentframe2"><i class="material-icons">&#xE86A;</i></a><a id="contentframe1_share" href="'+c[c.length-1].url+'" target="_blank"><i class="material-icons">open_in_new</i></a><a onclick=$("#contentframe2").slideToggle();><i class="material-icons">close</i></a><select id="contentframe2_select" onchange="selectSource(\'contentframe2\')">'+k+"</select></div></div></div></div>"}}else{$content.innerHTML+='<div class="col s12 m10 offset-m1 l6"><div class="card"><div class="content-container" id="contentframe1"><iframe name="contentframe1" src="'+c[0].embed+'" frameborder="0" allowfullscreen></iframe></div><div class="cardnav"><a id="contentframe1_reload" href="'+c[0].embed+'" target="contentframe1"><i class="material-icons">&#xE86A;</i></a><a id="contentframe1_share" href="'+c[0].url+'" target="_blank"><i class="material-icons">open_in_new</i></a><a onclick=$("#contentframe1").slideToggle();><i class="material-icons">close</i></a><select id="contentframe1_select" onchange="selectSource(\'contentframe1\')">'+k+"</select></div></div></div></div>";$content.innerHTML+='<div class="col s12 m10 offset-m1 l6"><div class="card"><div class="content-container" id="contentframe2"><iframe name="contentframe2" src="'+c[c.length-1].embed+'" frameborder="0" allowfullscreen></iframe></div><div class="cardnav"><a id="contentframe2_reload" href="'+c[c.length-1].embed+'" target="contentframe2"><i class="material-icons">&#xE86A;</i></a><a id="contentframe1_share" href="'+c[c.length-1].url+'" target="_blank"><i class="material-icons">open_in_new</i></a><a onclick=$("#contentframe2").slideToggle();><i class="material-icons">close</i></a><select id="contentframe2_select" onchange="selectSource(\'contentframe2\')">'+k+"</select></div></div></div></div>"}}if(this.twitter.length!=0){var d=document.createElement("div");d.className="col s12";d.id="twitter";d.style="padding: 0 !important";if(this.twitter.length<=2||m=="narrow"){d.className="col s12 l8 offset-l2"}for(var j in this.twitter){d.innerHTML+='<div class="col s12 m10 offset-m1 l'+Math.floor(12/this.twitter.length)+'"><div class="card"><a class="twitter-timeline" height="504" href="'+this.twitter[j].url+'"></a></div></div>'}$content.appendChild(d);$content.innerHTML+="<div class=\"col s12\"><a onclick=\"$('#twitter').slideToggle('slow');\">Toggle Twitter Feeds</a></div>";twttr.widgets.load()}if(this.audio.length+f.length+c.length+this.twitter.length==0){var e=document.createElement("div");e.className="col s12 m10 offset-m1 l8 offset-l2";e.innerHTML+='<div class="card-panel"><h3>Nothing to watch</h3></div>';$content.appendChild(e)}}}function Countdown(a,b){pad=function(c,d){var e=c+"";while(e.length<d){e="0"+e}return e};count=function(m){var f;var g=new Date();var j=Math.floor((m-g)/1000);var e="L- ";if(j<=0){e="L+ ";j=Math.floor((g-m)/1000)}var d=Math.floor(j/60);var h=Math.floor(d/60);var k=Math.floor(h/24);var c=pad((j%60),2);if(j<60){f=e+c}c=pad((d%60),2)+":"+c;if(d<60){f=e+c}c=pad((h%24),2)+":"+c;if(h<24){f=e+c}if(k>1){f=e+k+" days "+c}else{if(k==1){f=e+k+" day "+c}}return f};this.value=function(){return count(a)};if(b){setInterval(function(){if(document.getElementById(b)){document.getElementById(b).innerHTML=count(a)}else{b.innerHTML=count(a)}},1000)}}$.ajaxSetup({error:function(a,c,b){console.log("error "+c);console.log("incoming Text "+a.responseText)},async:false});document.addEventListener("DOMContentLoaded",function(){init();$(".button-collapse").sideNav();if(loader=document.getElementById("loading")){loading.parentNode.removeChild(loader)}});